<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Hello World</title>
  <script src="../bin/pixi.min.js"></script>
</head>
<body>
  <style>* {padding: 0; margin: 0}</style>
  <script type="text/javascript">
      
      //Aliases
        var Container = PIXI.Container,
            autoDetectRenderer = PIXI.autoDetectRenderer,
            loader = PIXI.loader,
            resources = PIXI.loader.resources,
            Sprite = PIXI.Sprite;

        var stage = new Container(), renderer = autoDetectRenderer(800, 600, { antialias: true });
        renderer.view.style.border = "1px dashed black";
        renderer.backgroundColor = 0xD2CEEE;
        renderer.autoResize = true;
        renderer.resize(512, 512);
        renderer.view.style.position = "absolute";
        renderer.view.style.display = "block";
        renderer.autoResize = true;
        stage.interactive = true;

        document.body.appendChild(renderer.view);

        loader
            .add("images/block.png")
            .load(setup);
        
        function setup() {

            //Create the `cat` sprite
            var block1 = new Sprite(resources["images/block.png"].texture);
            block1.y = 0; 
            block1.vx = 0;
            block1.vy = 0;
            block1.interactive = true;

            var block2 = new Sprite(resources["images/block.png"].texture);
            block2.y = 0;
            block2.x = block1.height;
            block2.interactive = true;

            var block3 = new Sprite(resources["images/block.png"].texture);
            block3.y = block2.height;
            block3.x = 0;
            block3.interactive = true;

            var block4 = new Sprite(resources["images/block.png"].texture);
            block4.y = block3.height;
            block4.x = block3.width;
            block4.interactive = true;

            var block5 = new Sprite(resources["images/block.png"].texture);
            block5.y = block4.height + block4.height;
            block5.x = 0;
            block5.interactive = true;

            stage.addChild(block1);
            stage.addChild(block2);
            stage.addChild(block3);
            stage.addChild(block4);
            stage.addChild(block5);
            stage.interactive = true;

            createDragAndDropAndClickFor(stage);
        }

        function onDragStart(event)
        {
            // store a reference to the data
            // the reason for this is because of multitouch
            // we want to track the movement of this particular touch
            this.data = event.data;
            this.alpha = 0.5;
            this.dragging = true;
        }

        function onDragEnd()
        {
            this.alpha = 1;

            this.dragging = false;

            // set the interaction data to null
            this.data = null;
        }

        function onDragMove()
        {
            if (this.dragging)
            {
                var newPosition = this.data.getLocalPosition(this.parent);
                this.position.x = newPosition.x;
                this.position.y = newPosition.y;
            }
        }

        function createDragAndDropAndClickFor(target){  
            target.interactive = true;
            target.on("mousedown", function(e){
                drag = target;
            });
            target.on("mouseup", function(e){
                drag = false;
            });
            target.on("mousemove", function(e){
                if(drag){
                    drag.position.x += e.data.originalEvent.movementX;
                    drag.position.y += e.data.originalEvent.movementY;
                }
            });
            target.on("click", function(e){
                target.rotation = target.rotation + 90;
            });
        }

        function onClick()
        {
            cat.rotation = cat.rotation + 90;
        }

        // run the render loop
        animate();

        function animate() {

            renderer.render(stage);
            requestAnimationFrame( animate );
        }

  </script>
</body>
</html>