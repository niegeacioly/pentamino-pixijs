<!DOCTYPE html>
<html lang="pt-br">
    <head>
      <!-- Required meta tags -->
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

      <!-- Bootstrap CSS -->
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
      <link rel="stylesheet" href="gameplay.css">
      <script src="../bin/pixi.min.js"></script>

      </head>
      <body>
          <nav class="navbar navbar-light bg-faded">
            <a class="navbar-brand" href="#">
              <img src="images/logo_pentamino.png" class="img-fluid" width="200" height="auto" class="d-inline-block align-top" alt="PentaminÃ³">
            </a>
          </nav>

           <!-- Game paly -->
          <section>
          <div id="gameplay">
              <div class="linha">
                  <div class="casa" id="casa1"></div>
                  <div class="casa" id="casa2"></div>
                  <div class="casa" id="casa3"></div>
                  <div class="casa" id="casa4"></div>
                  <div class="casa" id="casa5"></div>
                  <div class="casa" id="casa6"></div>
                  <div class="casa" id="casa7"></div>
                  <div class="casa" id="casa8"></div>
                  <div class="casa" id="casa9"></div>
                  <div class="casa" id="casa10"></div>
                  <div class="casa" id="casa11"></div>
                  <div class="casa" id="casa12"></div>
                  <div class="casa" id="casa13"></div>
                  <div class="casa" id="casa14"></div>
                  <div class="casa" id="casa15"></div>
                  <div class="casa" id="casa16"></div>
                  <div class="casa" id="casa17"></div>
                  <div class="casa" id="casa18"></div>
                  <div class="casa" id="casa19"></div>
                  <div class="casa" id="casa20"></div>
              </div>
              <div class="linha">
                  <div class="casa" id="casa1"></div>
                  <div class="casa" id="casa2"></div>
                  <div class="casa" id="casa3"></div>
                  <div class="casa" id="casa4"></div>
                  <div class="casa" id="casa5"></div>
                  <div class="casa" id="casa6"></div>
                  <div class="casa" id="casa7"></div>
                  <div class="casa" id="casa8"></div>
                  <div class="casa" id="casa9"></div>
                  <div class="casa" id="casa10"></div>
                  <div class="casa" id="casa11"></div>
                  <div class="casa" id="casa12"></div>
                  <div class="casa" id="casa13"></div>
                  <div class="casa" id="casa14"></div>
                  <div class="casa" id="casa15"></div>
                  <div class="casa" id="casa16"></div>
                  <div class="casa" id="casa17"></div>
                  <div class="casa" id="casa18"></div>
                  <div class="casa" id="casa19"></div>
                  <div class="casa" id="casa20"></div>
              </div>
              <div class="linha">
                  <div class="casa" id="casa1"></div>
                  <div class="casa" id="casa2"></div>
                  <div class="casa" id="casa3"></div>
                  <div class="casa" id="casa4"></div>
                  <div class="casa" id="casa5"></div>
                  <div class="casa" id="casa6"></div>
                  <div class="casa" id="casa7"></div>
                  <div class="casa" id="casa8"></div>
                  <div class="casa" id="casa9"></div>
                  <div class="casa" id="casa10"></div>
                  <div class="casa" id="casa11"></div>
                  <div class="casa" id="casa12"></div>
                  <div class="casa" id="casa13"></div>
                  <div class="casa" id="casa14"></div>
                  <div class="casa" id="casa15"></div>
                  <div class="casa" id="casa16"></div>
                  <div class="casa" id="casa17"></div>
                  <div class="casa" id="casa18"></div>
                  <div class="casa" id="casa19"></div>
                  <div class="casa" id="casa20"></div>
              </div>
              <div class="linha">
                  <div class="casa" id="casa1"></div>
                  <div class="casa" id="casa2"></div>
                  <div class="casa" id="casa3"></div>
                  <div class="casa" id="casa4"></div>
                  <div class="casa" id="casa5"></div>
                  <div class="casa" id="casa6"></div>
                  <div class="casa" id="casa7"></div>
                  <div class="casa" id="casa8"></div>
                  <div class="casa" id="casa9"></div>
                  <div class="casa" id="casa10"></div>
                  <div class="casa" id="casa11"></div>
                  <div class="casa" id="casa12"></div>
                  <div class="casa" id="casa13"></div>
                  <div class="casa" id="casa14"></div>
                  <div class="casa" id="casa15"></div>
                  <div class="casa" id="casa16"></div>
                  <div class="casa" id="casa17"></div>
                  <div class="casa" id="casa18"></div>
                  <div class="casa" id="casa19"></div>
                  <div class="casa" id="casa20"></div>
              </div>
              <div class="linha">
                  <div class="casa" id="casa1"></div>
                  <div class="casa" id="casa2"></div>
                  <div class="casa" id="casa3"></div>
                  <div class="casa" id="casa4"></div>
                  <div class="casa" id="casa5"></div>
                  <div class="casa" id="casa6"></div>
                  <div class="casa" id="casa7"></div>
                  <div class="casa" id="casa8"></div>
                  <div class="casa" id="casa9"></div>
                  <div class="casa" id="casa10"></div>
                  <div class="casa" id="casa11"></div>
                  <div class="casa" id="casa12"></div>
                  <div class="casa" id="casa13"></div>
                  <div class="casa" id="casa14"></div>
                  <div class="casa" id="casa15"></div>
                  <div class="casa" id="casa16"></div>
                  <div class="casa" id="casa17"></div>
                  <div class="casa" id="casa18"></div>
                  <div class="casa" id="casa19"></div>
                  <div class="casa" id="casa20"></div>
              </div>
              <div class="linha">
                  <div class="casa" id="casa1"></div>
                  <div class="casa" id="casa2"></div>
                  <div class="casa" id="casa3"></div>
                  <div class="casa" id="casa4"></div>
                  <div class="casa" id="casa5"></div>
                  <div class="casa" id="casa6"></div>
                  <div class="casa" id="casa7"></div>
                  <div class="casa" id="casa8"></div>
                  <div class="casa" id="casa9"></div>
                  <div class="casa" id="casa10"></div>
                  <div class="casa" id="casa11"></div>
                  <div class="casa" id="casa12"></div>
                  <div class="casa" id="casa13"></div>
                  <div class="casa" id="casa14"></div>
                  <div class="casa" id="casa15"></div>
                  <div class="casa" id="casa16"></div>
                  <div class="casa" id="casa17"></div>
                  <div class="casa" id="casa18"></div>
                  <div class="casa" id="casa19"></div>
                  <div class="casa" id="casa20"></div>
              </div>
          </div>
          </section>

          <script type="text/javascript">

                //Aliases
                    var Container = PIXI.Container,
                        autoDetectRenderer = PIXI.autoDetectRenderer,
                        loaderP = PIXI.loader,
                        loaderT = PIXI.loader,
                        resources = PIXI.loader.resources,
                        Sprite = PIXI.Sprite;

                    var stage = new Container(), renderer = autoDetectRenderer(1000, 240, { antialias: true }, true);
                    renderer.view.style.border = "1px dashed black";
                    renderer.backgroundColor = 0x232325;
                    renderer.autoResize = true;

                    document.body.appendChild(renderer.view);

                    loaderP
                        .add("images/block.png")
                        .load(setupLetterP)
                        .load(setupLetterT);

                    var drag = false;

                    function setupLetterP() {

                        //Create the sprites
                        gameSceneP = new Container();
                        stage.addChild(gameSceneP);
                        resource = resources["images/block.png"].texture;
                        var block1 = new Sprite(resource);
                        block1.y = 0;
                        block1.vx = 0;
                        block1.vy = 0;
                        block1.anchor.set(0.5, 0.5);

                        var block2 = new Sprite(resource);
                        block2.y = 0;
                        block2.x = block1.height;
                        block2.anchor.set(0.5, 0.5);

                        var block3 = new Sprite(resource);
                        block3.y = block2.height;
                        block3.x = 0;
                        block3.anchor.set(0.5, 0.5);

                        var block4 = new Sprite(resource);
                        block4.y = block3.height;
                        block4.x = block3.width;
                        block4.anchor.set(0.5, 0.5);

                        var block5 = new Sprite(resource);
                        block5.y = block4.height + block4.height;
                        block5.x = 0;
                        block5.anchor.set(0.5, 0.5);

                        gameSceneP.addChild(block1);
                        gameSceneP.addChild(block2);
                        gameSceneP.addChild(block3);
                        gameSceneP.addChild(block4);
                        gameSceneP.addChild(block5);
                        gameSceneP.interactive = true;

                        // the below code would shift the container 0.5 pixels along the x and y coords.
                        // gameSceneP.pivot.set(gameSceneP.width / 2,  gameSceneP.height / 2);
                        // gameSceneP.pivot.x = gameSceneP.width / 2;
                        // gameSceneP.pivot.y = gameSceneP.height / 2;
                        
                        // setup events
                        gameSceneP.on('mousedown', onDragStart)
                            .on('touchstart', onDragStart)
                            .on('mouseup', onDragEnd)
                            .on('mouseupoutside', onDragEnd)
                            .on('touchend', onDragEnd)
                            .on('touchendoutside', onDragEnd)
                            .on('mousemove', onDragMove)
                            .on('click', onClick)
                            .on('touchmove', onDragMove);
                    }

                    function setupLetterT() {

                        //Create the sprites
                        gameSceneT = new Container();
                        stage.addChild(gameSceneT);

                        resource = resources["images/block.png"].texture;
                        var block1 = new Sprite(resource);
                        block1.y = 0;
                        block1.x = block1.height * 5;
                        block1.anchor.set(0.5, 0.5);

                        var block2 = new Sprite(resource);
                        block2.y = block1.height;
                        block2.x = block1.height * 5;
                        block2.anchor.set(0.5, 0.5);

                        var block3 = new Sprite(resource);
                        block3.y = block1.height + block2.height;
                        block3.x = block1.height * 5;
                        block3.anchor.set(0.5, 0.5);

                        var block4 = new Sprite(resource);
                        block4.y = block1.height + block2.height;
                        block4.x = block1.height * 4;
                        block4.anchor.set(0.5, 0.5);

                        var block5 = new Sprite(resource);
                        block5.y = block1.height + block2.height;
                        block5.x = block1.height * 6;
                        block5.anchor.set(0.5, 0.5);

                        gameSceneT.addChild(block1);
                        gameSceneT.addChild(block2);
                        gameSceneT.addChild(block3);
                        gameSceneT.addChild(block4);
                        gameSceneT.addChild(block5);
                        gameSceneT.interactive = true;

                        // center the sprites anchor point
                        // gameSceneT.pivot.set(gameSceneT.width / 2,  gameSceneT.height / 2);

                        gameSceneT.on('mousedown', onDragStart)
                            .on('touchstart', onDragStart)
                            .on('mouseup', onDragEnd)
                            .on('mouseupoutside', onDragEnd)
                            .on('touchend', onDragEnd)
                            .on('touchendoutside', onDragEnd)
                            .on('mousemove', onDragMove)
                            .on('click', onClick)
                            .on('touchmove', onDragMove);
                    }

                    function onDragStart(event)
                    {
                        // store a reference to the data the reason for this is because of multitouch we want to track the movement of this particular touch
                        this.data = event.data;
                        this.alpha = 0.5;
                        this.dragging = true;
                    }

                    function onDragEnd()
                    {
                        this.alpha = 1;

                        this.dragging = false;

                        // set the interaction data to null
                        this.data = null;
                    }

                    function onDragMove()
                    {
                        if (this.dragging)
                        {
                            this.position.x += this.data.originalEvent.movementX;
                            this.position.y += this.data.originalEvent.movementY;
                        }
                    }

                    function onClick()
                    {
                        if (!this.dragging)
                        {
                            this.rotation += Math.PI / 2;
                        }
                    }

                    // run the render loop
                    animate();

                    function animate()
                    {
                        renderer.render(stage);
                        requestAnimationFrame( animate );
                    }

            </script>
      </body>

    <!-- jQuery first, then Tether, then Bootstrap JS. -->
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>

</html>