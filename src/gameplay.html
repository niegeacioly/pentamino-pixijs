<!DOCTYPE html>
<html lang="pt-br">
    <head>
      <!-- Required meta tags -->
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

      <!-- Bootstrap CSS -->
      <!-- integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" -->
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" crossorigin="anonymous">
      <link rel="stylesheet" href="gameplay.css">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.5.1/pixi.min.js"></script>
      <script src="../bin/scaleToWindow.js"></script>

      </head>
      <body>
          <nav class="navbar navbar-light bg-faded">
            <a class="navbar-brand" href="#">
              <img src="images/logo_pentamino.png" class="img-fluid" width="200" height="auto" class="d-inline-block align-top" alt="PentaminÃ³">
            </a>
          </nav>    

           <!-- Game paly -->
          <!-- <section>
          <div id="gameplay">
              <div class="linha">
                  <div class="casa" id="casa1"></div>
                  <div class="casa" id="casa2"></div>
                  <div class="casa" id="casa3"></div>
                  <div class="casa" id="casa4"></div>
                  <div class="casa" id="casa5"></div>
                  <div class="casa" id="casa6"></div>
                  <div class="casa" id="casa7"></div>
                  <div class="casa" id="casa8"></div>
                  <div class="casa" id="casa9"></div>
                  <div class="casa" id="casa10"></div>
                  <div class="casa" id="casa11"></div>
                  <div class="casa" id="casa12"></div>
                  <div class="casa" id="casa13"></div>
                  <div class="casa" id="casa14"></div>
                  <div class="casa" id="casa15"></div>
                  <div class="casa" id="casa16"></div>
                  <div class="casa" id="casa17"></div>
                  <div class="casa" id="casa18"></div>
                  <div class="casa" id="casa19"></div>
                  <div class="casa" id="casa20"></div>
              </div>
              <div class="linha">
                  <div class="casa" id="casa1"></div>
                  <div class="casa" id="casa2"></div>
                  <div class="casa" id="casa3"></div>
                  <div class="casa" id="casa4"></div>
                  <div class="casa" id="casa5"></div>
                  <div class="casa" id="casa6"></div>
                  <div class="casa" id="casa7"></div>
                  <div class="casa" id="casa8"></div>
                  <div class="casa" id="casa9"></div>
                  <div class="casa" id="casa10"></div>
                  <div class="casa" id="casa11"></div>
                  <div class="casa" id="casa12"></div>
                  <div class="casa" id="casa13"></div>
                  <div class="casa" id="casa14"></div>
                  <div class="casa" id="casa15"></div>
                  <div class="casa" id="casa16"></div>
                  <div class="casa" id="casa17"></div>
                  <div class="casa" id="casa18"></div>
                  <div class="casa" id="casa19"></div>
                  <div class="casa" id="casa20"></div>
              </div>
              <div class="linha">
                  <div class="casa" id="casa1"></div>
                  <div class="casa" id="casa2"></div>
                  <div class="casa" id="casa3"></div>
                  <div class="casa" id="casa4"></div>
                  <div class="casa" id="casa5"></div>
                  <div class="casa" id="casa6"></div>
                  <div class="casa" id="casa7"></div>
                  <div class="casa" id="casa8"></div>
                  <div class="casa" id="casa9"></div>
                  <div class="casa" id="casa10"></div>
                  <div class="casa" id="casa11"></div>
                  <div class="casa" id="casa12"></div>
                  <div class="casa" id="casa13"></div>
                  <div class="casa" id="casa14"></div>
                  <div class="casa" id="casa15"></div>
                  <div class="casa" id="casa16"></div>
                  <div class="casa" id="casa17"></div>
                  <div class="casa" id="casa18"></div>
                  <div class="casa" id="casa19"></div>
                  <div class="casa" id="casa20"></div>
              </div>
              <div class="linha">
                  <div class="casa" id="casa1"></div>
                  <div class="casa" id="casa2"></div>
                  <div class="casa" id="casa3"></div>
                  <div class="casa" id="casa4"></div>
                  <div class="casa" id="casa5"></div>
                  <div class="casa" id="casa6"></div>
                  <div class="casa" id="casa7"></div>
                  <div class="casa" id="casa8"></div>
                  <div class="casa" id="casa9"></div>
                  <div class="casa" id="casa10"></div>
                  <div class="casa" id="casa11"></div>
                  <div class="casa" id="casa12"></div>
                  <div class="casa" id="casa13"></div>
                  <div class="casa" id="casa14"></div>
                  <div class="casa" id="casa15"></div>
                  <div class="casa" id="casa16"></div>
                  <div class="casa" id="casa17"></div>
                  <div class="casa" id="casa18"></div>
                  <div class="casa" id="casa19"></div>
                  <div class="casa" id="casa20"></div>
              </div>
              <div class="linha">
                  <div class="casa" id="casa1"></div>
                  <div class="casa" id="casa2"></div>
                  <div class="casa" id="casa3"></div>
                  <div class="casa" id="casa4"></div>
                  <div class="casa" id="casa5"></div>
                  <div class="casa" id="casa6"></div>
                  <div class="casa" id="casa7"></div>
                  <div class="casa" id="casa8"></div>
                  <div class="casa" id="casa9"></div>
                  <div class="casa" id="casa10"></div>
                  <div class="casa" id="casa11"></div>
                  <div class="casa" id="casa12"></div>
                  <div class="casa" id="casa13"></div>
                  <div class="casa" id="casa14"></div>
                  <div class="casa" id="casa15"></div>
                  <div class="casa" id="casa16"></div>
                  <div class="casa" id="casa17"></div>
                  <div class="casa" id="casa18"></div>
                  <div class="casa" id="casa19"></div>
                  <div class="casa" id="casa20"></div>
              </div>
              <div class="linha">
                  <div class="casa" id="casa1"></div>
                  <div class="casa" id="casa2"></div>
                  <div class="casa" id="casa3"></div>
                  <div class="casa" id="casa4"></div>
                  <div class="casa" id="casa5"></div>
                  <div class="casa" id="casa6"></div>
                  <div class="casa" id="casa7"></div>
                  <div class="casa" id="casa8"></div>
                  <div class="casa" id="casa9"></div>
                  <div class="casa" id="casa10"></div>
                  <div class="casa" id="casa11"></div>
                  <div class="casa" id="casa12"></div>
                  <div class="casa" id="casa13"></div>
                  <div class="casa" id="casa14"></div>
                  <div class="casa" id="casa15"></div>
                  <div class="casa" id="casa16"></div>
                  <div class="casa" id="casa17"></div>
                  <div class="casa" id="casa18"></div>
                  <div class="casa" id="casa19"></div>
                  <div class="casa" id="casa20"></div>
              </div>
          </div>
          </section> -->

          <script type="text/javascript">

                //Aliases
                    var Container = PIXI.Container,
                        autoDetectRenderer = PIXI.autoDetectRenderer,
                        loader = PIXI.loader,
                        resources = PIXI.loader.resources,
                        Sprite = PIXI.Sprite;

                    var stage = new Container(), renderer = autoDetectRenderer(1000, 240, { antialias: true }, true);
                    renderer.view.style.border = "1px dashed black";
                    renderer.backgroundColor = 0x232325;

                    document.body.appendChild(renderer.view);

                    loader
                        .add("images/block.png")
                        .load(setupLetterT)
                        .load(setupLetterP)
                        .load(setupLetterI)
                        .load(setupLetterX);

                    var drag = false;

                    function setupLetterP() {

                        //Create the sprites
                        gameSceneP = new Container();
                        gameSceneP.interactive = true;
                        gameSceneP.position.rotation = 0;
                        gameSceneP.x = 20;
                        gameSceneP.y = 20;
                        gameSceneP.rotation = 0;
                        gameSceneP.pivot.x = 0.5;
                        gameSceneP.pivot.y = 0.5;

                        resource = resources["images/block.png"].texture;
                        var block1 = new Sprite(resource);
                        var block2 = new Sprite(resource);
                        var block3 = new Sprite(resource);
                        var block4 = new Sprite(resource);
                        var block5 = new Sprite(resource);

                        gameSceneP.addChild(block1);
                        block1.anchor.set(0.5, 0.5);
                        block1.position.y = 0;
                        block1.position.x = 0;

                        gameSceneP.addChild(block2);
                        block2.anchor.set(0.5, 0.5);
                        block2.position.y = 0;
                        block2.position.x = block1.height;

                        gameSceneP.addChild(block3);
                        block3.anchor.set(0.5, 0.5);
                        block3.position.y = block2.height;
                        block3.position.x = 0;

                        gameSceneP.addChild(block4);
                        block4.anchor.set(0.5, 0.5);
                        block4.position.y = block3.height;
                        block4.position.x = block3.width;

                        gameSceneP.addChild(block5);
                        block5.anchor.set(0.5, 0.5);
                        block5.position.y = block4.height + block4.height;
                        block5.position.x = 0;

                        // setup events
                        gameSceneP.on('mousedown', onDragStart)
                            .on('touchstart', onDragStart)
                            .on('mouseup', onDragEnd)
                            .on('mouseupoutside', onDragEnd)
                            .on('touchend', onDragEnd)
                            .on('touchendoutside', onDragEnd)
                            .on('mousemove', onDragMove)
                            .on('touchmove', onDragMove)
                            .on('click', onClick);
                        
                        stage.addChild(gameSceneP);

                    }

                    function setupLetterT() {

                        //Create the sprites
                        gameSceneT = new Container();
                        gameSceneT.interactive = true;
                        gameSceneT.position.rotation = 0;
                        gameSceneT.x = 100;
                        gameSceneT.y = 20;
                        gameSceneT.rotation = 0;
                        gameSceneT.pivot.x = 0.5;
                        gameSceneT.pivot.y = 0.5;

                        resource = resources["images/block.png"].texture;
                        var block1 = new Sprite(resource);
                        var block2 = new Sprite(resource);
                        var block3 = new Sprite(resource);
                        var block4 = new Sprite(resource);
                        var block5 = new Sprite(resource);

                        gameSceneT.addChild(block1);
                        block1.anchor.set(0.5, 0.5);
                        block1.position.y = 0;
                        block1.position.x = block1.height;

                        gameSceneT.addChild(block2);
                        block2.anchor.set(0.5, 0.5);
                        block2.position.y = block1.height;
                        block2.position.x = block1.width;

                        gameSceneT.addChild(block3);
                        block3.anchor.set(0.5, 0.5);
                        block3.position.y = block1.height + block2.height;
                        block3.position.x = block1.width + block2.width ;

                        gameSceneT.addChild(block4);
                        block4.anchor.set(0.5, 0.5);
                        block4.position.y = block1.height + block2.height;
                        block4.position.x = block1.height;

                        gameSceneT.addChild(block5);
                        block5.anchor.set(0.5, 0.5);
                        block5.position.y = block1.height + block1.height;
                        block5.position.x = 0;

                        gameSceneT.on('mousedown', onDragStart)
                            .on('touchstart', onDragStart)
                            .on('mouseup', onDragEnd)
                            .on('mouseupoutside', onDragEnd)
                            .on('touchend', onDragEnd)
                            .on('touchendoutside', onDragEnd)
                            .on('mousemove', onDragMove)
                            .on('touchmove', onDragMove)
                            .on('click', onClick);

                        stage.addChild(gameSceneT);
                    }
                    
                    function setupLetterI() {

                        //Create the sprites
                        gameSceneI = new Container();
                        gameSceneI.interactive = true;
                        gameSceneI.position.rotation = 0;
                        gameSceneI.x = 150;
                        gameSceneI.y = 20;
                        gameSceneI.rotation = 0;
                        gameSceneI.pivot.x = 0.5;
                        gameSceneI.pivot.y = 0.5;

                        resource = resources["images/block.png"].texture;
                        var block1 = new Sprite(resource);
                        var block2 = new Sprite(resource);
                        var block3 = new Sprite(resource);
                        var block4 = new Sprite(resource);
                        var block5 = new Sprite(resource);

                        gameSceneI.addChild(block1);
                        block1.anchor.set(0.5, 0.5);
                        block1.position.y = 0;
                        block1.position.x = 0;

                        gameSceneI.addChild(block2);
                        block2.anchor.set(0.5, 0.5);
                        block2.position.y = block1.height;
                        block2.position.x = 0;

                        gameSceneI.addChild(block3);
                        block3.anchor.set(0.5, 0.5);
                        block3.position.y = block1.height + block2.height;
                        block3.position.x = 0;

                        gameSceneI.addChild(block4);
                        block4.anchor.set(0.5, 0.5);
                        block4.position.y = block1.height + block2.height + block3.height;
                        block4.position.x = 0;

                        gameSceneI.addChild(block5);
                        block5.anchor.set(0.5, 0.5);
                        block5.position.y = block1.height + block2.height + block3.height + block4.height;
                        block5.position.x = 0;

                        gameSceneI.on('mousedown', onDragStart)
                            .on('touchstart', onDragStart)
                            .on('mouseup', onDragEnd)
                            .on('mouseupoutside', onDragEnd)
                            .on('touchend', onDragEnd)
                            .on('touchendoutside', onDragEnd)
                            .on('mousemove', onDragMove)
                            .on('touchmove', onDragMove)
                            .on('click', onClick);

                        stage.addChild(gameSceneI);
                    }

                    function setupLetterX() {

                        //Create the sprites
                        gameSceneX = new Container();
                        gameSceneX.interactive = true;
                        gameSceneX.position.rotation = 0;
                        gameSceneX.x = 200;
                        gameSceneX.y = 20;
                        gameSceneX.rotation = 0;
                        gameSceneX.pivot.x = 0.5;
                        gameSceneX.pivot.y = 0.5;

                        resource = resources["images/block.png"].texture;
                        var block1 = new Sprite(resource);
                        var block2 = new Sprite(resource);
                        var block3 = new Sprite(resource);
                        var block4 = new Sprite(resource);
                        var block5 = new Sprite(resource);

                        gameSceneX.addChild(block1);
                        block1.anchor.set(0.5, 0.5);
                        block1.position.y = 0;
                        block1.position.x = block1.width;

                        gameSceneX.addChild(block2);
                        block2.anchor.set(0.5, 0.5);
                        block2.position.y = block1.height;
                        block2.position.x = 0;

                        gameSceneX.addChild(block3);
                        block3.anchor.set(0.5, 0.5);
                        block3.position.y = block1.height;
                        block3.position.x = 0;

                        // gameSceneX.addChild(block4);
                        // block4.anchor.set(0.5, 0.5);
                        // block4.position.y = block1.height + block2.height + block3.height;
                        // block4.position.x = 0;

                        // gameSceneX.addChild(block5);
                        // block5.anchor.set(0.5, 0.5);
                        // block5.position.y = block1.height + block2.height + block3.height + block4.height;
                        // block5.position.x = 0;

                        gameSceneX.on('mousedown', onDragStart)
                            .on('touchstart', onDragStart)
                            .on('mouseup', onDragEnd)
                            .on('mouseupoutside', onDragEnd)
                            .on('touchend', onDragEnd)
                            .on('touchendoutside', onDragEnd)
                            .on('mousemove', onDragMove)
                            .on('touchmove', onDragMove)
                            .on('click', onClick);

                        stage.addChild(gameSceneX);
                    }

                    function onDragStart(event) {
                        // store a reference to the data the reason for this is because of multitouch we want to track the movement of this particular touch
                        this.start_data = {x: event.data.originalEvent.screenX, y: event.data.originalEvent.screenY};
                        this.data = event.data;
                        this.alpha = 0.5;
                        this.dragging = true;
                    }

                    function onDragEnd(event) {

                        var ev_data = event.data.originalEvent;

                        this.alpha = 1;

                        this.dragging = false;

                        if (this.start_data) {
                            if (Math.abs(this.start_data.x - ev_data.screenX) > 2 || Math.abs(this.start_data.y - ev_data.screenY) > 2) {
                                event.stopPropagation();
                            }
                        }

                        // set the interaction data to null
                        this.data = null;
                    }

                    function onDragMove() {
                        if (this.dragging)
                        {
                            this.position.x += this.data.originalEvent.movementX;
                            this.position.y += this.data.originalEvent.movementY;
                        }
                    }

                    function onClick(event)
                    {
                        // var currentTarget = event.currentTarget;
                        // console.log(currentTarget.start_data.x + ' - '  + currentTarget.start_data.y);
                        // console.log(currentTarget.position.x + ' - '  + currentTarget.position.y);
                        // currentTarget.rotation += Math.PI / 2;
                        this.rotation += Math.PI / 2; 
                    }

                    // run the render loop
                    animate();

                    function animate()
                    {
                        renderer.render(stage);
                        requestAnimationFrame( animate );
                    }

                    window.addEventListener("resize", function(event){ 
                        scaleToWindow(renderer.view);
                    });

            </script>
      </body>

    <!-- jQuery first, then Tether, then Bootstrap JS. -->
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>

</html>